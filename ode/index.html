<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>ODE Visualization</title>
    <link href="style.css" rel="stylesheet" type="text/css" />

    <!-- include libraries -->
    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
    <script src="https://cdn.jsdelivr.net/npm/@observablehq/plot@0.6"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3-fetch@3.0.1/dist/d3-fetch.min.js"></script>
  </head>
  <body onload="mainScreen()">
    <div id=graphDiv></div>
    <div id="inputDiv">
      <main>
        <h2>Autonomous 1st Order 2D ODEs</h2>
        Welcome! This is a demo of how flows work in ODEs. This section deals with autonomous ODEs (no t dependence for x' and y'). Please input your desired ODE below! Then you can click any point on the graph to begin a flow, or click the "Automatic Flow Array" button below to get an automated generation of flows:
        <br>
        <br>
        <br>
        x'(x, y) = <input id="x_deriv_input" placeholder="time derivative of x" value="-y*y"></input><br>
        y'(x, y) = <input id="y_deriv_input" placeholder="time derivative of y" value="x-0.3*y"></input><br>
        <br>
        <button id="submitButton" onclick="resetVectorField()">Update Dynamics / Clear Flows</button>
        <br>
        <input type="checkbox" id="precalcFlowButton" onclick="precalcFlows = !precalcFlows">Precalculate Flows</input>
        <br>
        <br>
        <button id="flowArrayButton" onclick="createFlowArray()">Create Automatic Flow Array</button>
        <br>

        <br>
        Canonical Linear Systems to try: <br>

        <button onclick="document.getElementById('x_deriv_input').value = '-y';
                         document.getElementById('y_deriv_input').value = 'x'
                         resetVectorField()">1</button> x' = -y, &ensp; y' = x &nbsp;&emsp;&emsp;&emsp; (CCW Center) <br>

        <button onclick="document.getElementById('x_deriv_input').value = 'y';
                         document.getElementById('y_deriv_input').value = '-x-0.5*y'
                         resetVectorField()">2</button> x' = y, &ensp; y' = -x-0.5*y &ensp; (CW Sprial Sink) <br>

        <button onclick="document.getElementById('x_deriv_input').value = 'x';
                         document.getElementById('y_deriv_input').value = '0.5*y'
                         resetVectorField()">3</button> x' = x, &ensp; y' = 0.5*y &emsp;&ensp; (Real Source) <br>

        <button onclick="document.getElementById('x_deriv_input').value = '-x';
                         document.getElementById('y_deriv_input').value = '-0.5*y'
                         resetVectorField()">4</button> x' = -x, &ensp; y' = -0.5*y &ensp;&ensp; (Real Sink) <br>

        <button onclick="document.getElementById('x_deriv_input').value = '-x';
                         document.getElementById('y_deriv_input').value = '0.5*y'
                         resetVectorField()">5</button> x' = -x, &ensp; y' = 0.5*y &emsp;&ensp; (Real Saddle) <br>

        <br>
        Interesting Nonlinear Systems to try: <br>
        <button onclick="document.getElementById('x_deriv_input').value = '-y*y';
                         document.getElementById('y_deriv_input').value = 'x-0.3*y'
                         resetVectorField()">1</button> x' = -y*y, &emsp;&emsp;&ensp; y' = x-0.3*y <br>

        <button onclick="document.getElementById('x_deriv_input').value = '-y*cos(x)';
                         document.getElementById('y_deriv_input').value = 'x-0.3*y'
                         resetVectorField()">2</button> x' = -y*cos(x), &ensp; y' = x-0.3*y <br>

        <button onclick="document.getElementById('x_deriv_input').value = 'y';
                         document.getElementById('y_deriv_input').value = '-0.5*sin(x)-0.1*y'
                         resetVectorField()">3</button> x' = y, &emsp;&emsp;&emsp;&emsp; y' = -0.5*sin(x)-0.1*y (Dampened Pendulum: x=ùúÉ, y=dùúÉ/dt) <br>

        <button onclick="document.getElementById('x_deriv_input').value = '-y';
                         document.getElementById('y_deriv_input').value = 'x-0.3*y*y'
                         resetVectorField()">4</button> x' = -y, &emsp;&emsp;&emsp;&ensp; y' = x-0.3*y*y &emsp;&emsp;&emsp;&ensp;("Guitar pick")<br>
      </main>
    </div>
    <script src="js/helpers.js"></script>
    <script src="js/flow2D.js"></script>
    <script src="js/script.js"></script>
  </body>
</html>